---
layout: post 
title:  Hbase 数据结构
date:   2023-10-31 16:40:28 
categories: HBase
---

# 逻辑结构

## NAMESPACE

类似于关系型数据库中将表通过库(database)进行管理，Hbase中也在表的层级上抽象出了命名空间(namespace)的概念，实现对表的逻辑分组及管理。
当在Hbase创建一张表时，必须指定表所属的命名空间。

基于命名空间，Hbase还提供了如下功能：
* 资源配额，用户可以在任意时刻对namespace的配额进行设置，包括namespace中表的数量以及region的数量。配置方式如下（Hbase实例需开启配额控制）：

```shell
# 创建一个最多包含5张表 且 最多包含10个Region的命名空间
hbase> create_namespace 'ns1', {'hbase.namespace.quota.maxtables'=>'5'},{'hbase.namespace.quota.maxregions'=>'10'}
#显示命名空间hbase的quota信息
hbase> describe_namespace 'ns1'
#修改namespace的最大表数为8
hbase> alter_namespace 'ns1',{METHOD =>'set','hbase.namespace.quota.maxtables'=>'8'} 
```

* rsgroup（RegionServer Group），一个命名空间或一张表，可以被固定到一组RegionServer上，从而在RegionServer上实现namespace或table数据隔离性。rsgroup级别的
数据隔离，管理方便，能够充分利用集群的资源，但hdfs层还是共用的，导致隔离不够彻底，若datanode出现异常，还是会影响多个业务。使用方式如下：

```
#创建一个分组
hbase> add_rsgroup 'performance_group'
#添加指定RegionServer至rsgroup中
hbase> move_servers_rsgroup 'performance_group',['RS地址:端口号']
#添加指定表至rsgroup中
hbase> move_tables_rsgroup 'performance_group',['table1','table2']
#获取组信息
hbase> get_rsgroup 'performance_group'
#平衡RegionServer组
hbase> balance_rsgroup 'performance_group'
```

* 命名空间安全管理，可以为用户提供命名空间级别的访问控制





# 物理结构