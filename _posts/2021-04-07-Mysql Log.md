---
layout: post
title:  "MySQL日志系统"
date:   2021-04-08 18:29:30
categories: MySQL
---
#### MySQL Server
MySQL Server主要有以下几种日志[官网](https://dev.mysql.com/doc/refman/8.0/en/server-logs.html)

* 错误日志`error log`，用来记录启动，运行或停止mysqld遇到的问题，详情见;

* 通用查询日志`general log`,是mysqld在做什么的常规记录 。当客户端连接或断开连接时，服务器会将信息写入此日志，并记录从客户端收到的每个SQL语句;

* 中继日志`relay log`,主从复制时使用，记录从复制源服务器收到的数据更改；

* 慢查询日志`slow query log`,慢查询日志由SQL语句组成，这些语句需要花费超过`long_query_time`几秒钟的时间来执行，并且至少`min_examined_row_limit`需要检查行。慢查询日志可用于查找执行时间较长的查询，因此可作为优化的候选对象.
使用 `--slow_query_log[={0|1}]`命令开启或关闭。不带参数或参数为1时，--slow_query_log启用日志。参数为0时，此选项禁用日志;

* 二进制日志`bin log`,包含了所有更新了数据或者已经潜在更新了数据(比如没有匹配任何行的一个DELETE)，主要有两个作用：
    * 主从复制
    * 数据恢复


#### Innodb

Innodb引擎引入的日志[官网](https://dev.mysql.com/doc/refman/8.0/en/innodb-redo-log.html)

* 重做日志redo log
重做日志是基于磁盘的数据结构，在崩溃恢复期间用于纠正不完整事务写入的数据。

* 撤销日志undo log
撤消日志是与单个读写事务关联的撤消日志记录的集合。撤消日志记录包含有关如何撤消事务对聚簇索引记录的最新更改的信息。如果另一个事务需要将原始数据视为一致读取操作的一部分，则将从撤消日志记录中检索未修改的数据。

#### binlog(Server层)



#### redo log(Innodb引擎)






